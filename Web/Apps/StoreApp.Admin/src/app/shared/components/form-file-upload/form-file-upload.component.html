<div class="form-file-upload">
  <label class="form-label" *ngIf="label">
    {{ label }}
    <span class="required-indicator" *ngIf="required">*</span>
  </label>

  <div class="file-upload-area"
       [class.drag-over]="isDragOver"
       [class.has-error]="hasError"
       [class.disabled]="disabled"
       (dragover)="onDragOver($event)"
       (dragleave)="onDragLeave($event)"
       (drop)="onDrop($event)">

    <div class="upload-content" *ngIf="!hasValidImage">
      <div class="upload-icon">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 16L12 8M12 8L15 11M12 8L9 11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M3 15V16C3 18.8284 3 20.2426 3.87868 21.1213C4.75736 22 6.17157 22 9 22H15C17.8284 22 19.2426 22 20.1213 21.1213C21 20.2426 21 18.8284 21 16V15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <p class="upload-text">Drag and drop an image here, or</p>
      <button type="button" class="browse-btn" (click)="fileInput.click()" [disabled]="disabled">
        Browse Files
      </button>
      <p class="upload-hint">PNG, JPG, JPEG up to 4MB</p>
    </div>

    <div class="file-preview" *ngIf="hasValidImage">
      <div class="preview-image">
        <img [src]="value" [alt]="fileName" />
      </div>
      <div class="file-info">
        <p class="file-name">{{ fileName }}</p>
        <button type="button" class="remove-btn" (click)="removeFile()" [disabled]="disabled">
          Remove
        </button>
      </div>
    </div>

    <input #fileInput
           type="file"
           [accept]="accept"
           (change)="onFileSelect($event)"
           [disabled]="disabled"
           class="file-input" />
  </div>

  <div class="error-message" *ngIf="hasError">
    {{ errorMessage }}
  </div>
</div>
