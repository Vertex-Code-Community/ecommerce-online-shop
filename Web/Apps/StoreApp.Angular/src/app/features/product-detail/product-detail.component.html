<div class="product-detail-page-wrapper">
  @if (isLoading$ | async) {
    <div class="loading-indicator">
      <app-dots-loader
        color="#000000"
        [size]="12"
        [animationDuration]="1.2"/>
    </div>
  }
  @else if (error$ | async)
  {
    <div class="error-section">
      <h2>Error Loading Product</h2>
      <p>{{ (error$ | async).message }}</p>
      <button (click)="loadProduct()" class="retry-button">Try Again</button>
    </div>
  }
  @else if (currentProduct$ | async)
  {
    <div class="product-detail-page">
      <app-product-info [fullProduct]="(currentProduct$ | async)!"/>

      <app-review-list
          [reviews]="(reviews$ | async) || []"
          [isLoading]="(reviewsLoading$ | async) || false"
          [isReadOnly]="!(isAuthenticated$ | async) || false"
          (writeReviewClicked)="onWriteReview()"/>

      <div class="also-see-wrapper">
        <app-product-list
          [headerText]="'YOU MIGHT ALSO LIKE'"
          [products]="(alsoLikeProducts$ | async) || []"
          [isLoading]="(alsoLikeLoading$ | async) || false"
          [isScrollable]="true"
          [showViewAllButton]="false"/>
      </div>
    </div>
  }
</div>
