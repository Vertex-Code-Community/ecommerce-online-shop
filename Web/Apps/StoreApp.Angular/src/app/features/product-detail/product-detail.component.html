<div class="product-detail-page-wrapper">
  @if (isLoading$ | async) {
    <div class="loading-indicator">
      <app-loading-indicator
        text="Loading product details..."
        size="large"
        color="#33b469">
      </app-loading-indicator>
    </div>
  }
  @else if (error$ | async)
  {
    <div class="error-section">
      <h2>Error Loading Product</h2>
      <p>{{ (error$ | async).message }}</p>
      <button (click)="loadProduct()" class="retry-button">Try Again</button>
    </div>
  }
  @else if (currentProduct$ | async)
  {
    <div class="product-detail-page">
      <app-product-info
        [fullProduct]="(currentProduct$ | async)!"
        (addToCartClicked)="onProductAddToCart($event)">
      </app-product-info>

      <app-review-list
        [reviews]="(reviews$ | async) || []"
        [isLoading]="(reviewsLoading$ | async) || false"
        [isReadOnly]="false"
        (writeReviewClicked)="onWriteReview()">
      </app-review-list>

      <div class="also-see-wrapper">
        <app-product-list
          [headerText]="'YOU MIGHT ALSO LIKE'"
          [products]="alsoLikeProducts"
          [isScrollable]="true"
          [showViewAllButton]="false"
          (productClick)="onAlsoLikeProductClick($event)"/>
      </div>
    </div>
  }
</div>
